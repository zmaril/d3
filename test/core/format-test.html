<!DOCTYPE html>
<html><head><title>zmaril/d3 » test › core › format-test.js

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>format-test.js</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../env&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">vows</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;vows&quot;</span><span class="p">),</span>
    <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;assert&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">vows</span><span class="p">.</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;d3.format&quot;</span><span class="p">);</span>

<span class="nx">suite</span><span class="p">.</span><span class="nx">addBatch</span><span class="p">({</span>
  <span class="s2">&quot;format&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">topic</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s2">&quot;returns a string&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">));</span>
    <span class="p">},</span>
    <span class="s2">&quot;can zero fill&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;08d&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;00000000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;00000042&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;42000000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">420000000</span><span class="p">),</span> <span class="s2">&quot;420000000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;−0000004&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;−0000042&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4200000</span><span class="p">),</span> <span class="s2">&quot;−4200000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;−42000000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can space fill&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;8d&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;       0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;      42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;42000000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">420000000</span><span class="p">),</span> <span class="s2">&quot;420000000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;      −4&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;     −42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4200000</span><span class="p">),</span> <span class="s2">&quot;−4200000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;−42000000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can output fixed-point notation&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1f&quot;</span><span class="p">)(</span><span class="mf">0.49</span><span class="p">),</span> <span class="s2">&quot;0.5&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2f&quot;</span><span class="p">)(</span><span class="mf">0.449</span><span class="p">),</span> <span class="s2">&quot;0.45&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3f&quot;</span><span class="p">)(</span><span class="mf">0.4449</span><span class="p">),</span> <span class="s2">&quot;0.445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.5f&quot;</span><span class="p">)(</span><span class="mf">0.444449</span><span class="p">),</span> <span class="s2">&quot;0.44445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1f&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100.0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2f&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100.00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3f&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100.000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.5f&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100.00000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can output general notation&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1g&quot;</span><span class="p">)(</span><span class="mf">0.049</span><span class="p">),</span> <span class="s2">&quot;0.05&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1g&quot;</span><span class="p">)(</span><span class="mf">0.49</span><span class="p">),</span> <span class="s2">&quot;0.5&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2g&quot;</span><span class="p">)(</span><span class="mf">0.449</span><span class="p">),</span> <span class="s2">&quot;0.45&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3g&quot;</span><span class="p">)(</span><span class="mf">0.4449</span><span class="p">),</span> <span class="s2">&quot;0.445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.5g&quot;</span><span class="p">)(</span><span class="mf">0.444449</span><span class="p">),</span> <span class="s2">&quot;0.44445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1g&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;1e+2&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2g&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;1.0e+2&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3g&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.5g&quot;</span><span class="p">)(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100.00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.5g&quot;</span><span class="p">)(</span><span class="mf">100.2</span><span class="p">),</span> <span class="s2">&quot;100.20&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2g&quot;</span><span class="p">)(</span><span class="mf">0.002</span><span class="p">),</span> <span class="s2">&quot;0.0020&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can output exponent notation &quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0e+0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;4.2e+1&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;4.2e+7&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">420000000</span><span class="p">),</span> <span class="s2">&quot;4.2e+8&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;−4e+0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;−4.2e+1&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4200000</span><span class="p">),</span> <span class="s2">&quot;−4.2e+6&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;−4.2e+7&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can output SI prefix notation&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;1&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;10&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">999.5</span><span class="p">),</span> <span class="s2">&quot;999.5&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">999500</span><span class="p">),</span> <span class="s2">&quot;999.5k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="s2">&quot;1k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">1400</span><span class="p">),</span> <span class="s2">&quot;1.4k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">1500.5</span><span class="p">),</span> <span class="s2">&quot;1.5005k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">000001</span><span class="p">),</span> <span class="s2">&quot;1μ&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can output SI prefix notation with appropriate rounding&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3s&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0.00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;1.00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;10.0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;100&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">999.5</span><span class="p">),</span> <span class="s2">&quot;1.00k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">999500</span><span class="p">),</span> <span class="s2">&quot;1.00M&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="s2">&quot;1.00k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">1500.5</span><span class="p">),</span> <span class="s2">&quot;1.50k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">145500000</span><span class="p">),</span> <span class="s2">&quot;146M&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">145999999.999999347</span><span class="p">),</span> <span class="s2">&quot;146M&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">1</span><span class="nx">e26</span><span class="p">),</span> <span class="s2">&quot;100Y&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">000001</span><span class="p">),</span> <span class="s2">&quot;1.00μ&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">009995</span><span class="p">),</span> <span class="s2">&quot;0.0100&quot;</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.4s&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">999.5</span><span class="p">),</span> <span class="s2">&quot;999.5&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">999500</span><span class="p">),</span> <span class="s2">&quot;999.5k&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">009995</span><span class="p">),</span> <span class="s2">&quot;9.995m&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can output a percentage&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">042</span><span class="p">),</span> <span class="s2">&quot;4%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;42%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">4.2</span><span class="p">),</span> <span class="s2">&quot;420%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">042</span><span class="p">),</span> <span class="s2">&quot;−4%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;−42%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mf">4.2</span><span class="p">),</span> <span class="s2">&quot;−420%&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can output a percentage with rounding and sign&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;+.2p&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">00123</span><span class="p">),</span> <span class="s2">&quot;+0.12%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">0123</span><span class="p">),</span> <span class="s2">&quot;+1.2%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">123</span><span class="p">),</span> <span class="s2">&quot;+12%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mf">1.23</span><span class="p">),</span> <span class="s2">&quot;+120%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">00123</span><span class="p">),</span> <span class="s2">&quot;−0.12%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">0123</span><span class="p">),</span> <span class="s2">&quot;−1.2%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">123</span><span class="p">),</span> <span class="s2">&quot;−12%&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.23</span><span class="p">),</span> <span class="s2">&quot;−120%&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can round to significant digits&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2r&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0.0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1r&quot;</span><span class="p">)(</span><span class="mf">0.049</span><span class="p">),</span> <span class="s2">&quot;0.05&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1r&quot;</span><span class="p">)(</span><span class="mf">0.49</span><span class="p">),</span> <span class="s2">&quot;0.5&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2r&quot;</span><span class="p">)(</span><span class="mf">0.449</span><span class="p">),</span> <span class="s2">&quot;0.45&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3r&quot;</span><span class="p">)(</span><span class="mf">0.4449</span><span class="p">),</span> <span class="s2">&quot;0.445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3r&quot;</span><span class="p">)(</span><span class="mf">1.00</span><span class="p">),</span> <span class="s2">&quot;1.00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3r&quot;</span><span class="p">)(</span><span class="mf">0.9995</span><span class="p">),</span> <span class="s2">&quot;1.00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.5r&quot;</span><span class="p">)(</span><span class="mf">0.444449</span><span class="p">),</span> <span class="s2">&quot;0.44445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)(</span><span class="mf">123.45</span><span class="p">),</span> <span class="s2">&quot;123.45&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.1r&quot;</span><span class="p">)(</span><span class="mf">123.45</span><span class="p">),</span> <span class="s2">&quot;100&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2r&quot;</span><span class="p">)(</span><span class="mf">123.45</span><span class="p">),</span> <span class="s2">&quot;120&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.3r&quot;</span><span class="p">)(</span><span class="mf">123.45</span><span class="p">),</span> <span class="s2">&quot;123&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.4r&quot;</span><span class="p">)(</span><span class="mf">123.45</span><span class="p">),</span> <span class="s2">&quot;123.5&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.5r&quot;</span><span class="p">)(</span><span class="mf">123.45</span><span class="p">),</span> <span class="s2">&quot;123.45&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.6r&quot;</span><span class="p">)(</span><span class="mf">123.45</span><span class="p">),</span> <span class="s2">&quot;123.450&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can round very small numbers&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2r&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">22</span><span class="p">),</span> <span class="s2">&quot;0.00000000000000000000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can group thousands&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;,d&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;42,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">420000000</span><span class="p">),</span> <span class="s2">&quot;420,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;−4&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;−42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4200000</span><span class="p">),</span> <span class="s2">&quot;−4,200,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;−42,000,000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can group thousands and zero fill&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;01,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;01,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;02,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;03,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;05,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;08,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;013,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0,000,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;021,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0,000,000,000,000,000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can group thousands and zero fill with overflow&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;01,d&quot;</span><span class="p">)(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;1&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;01,d&quot;</span><span class="p">)(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;1&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;02,d&quot;</span><span class="p">)(</span><span class="mi">12</span><span class="p">),</span> <span class="s2">&quot;12&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;03,d&quot;</span><span class="p">)(</span><span class="mi">123</span><span class="p">),</span> <span class="s2">&quot;123&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;05,d&quot;</span><span class="p">)(</span><span class="mi">12345</span><span class="p">),</span> <span class="s2">&quot;12,345&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;08,d&quot;</span><span class="p">)(</span><span class="mi">12345678</span><span class="p">),</span> <span class="s2">&quot;12,345,678&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;013,d&quot;</span><span class="p">)(</span><span class="mi">1234567890123</span><span class="p">),</span> <span class="s2">&quot;1,234,567,890,123&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can group thousands and space fill&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;1,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;1,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;2,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot; 0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;3,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;  0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;5,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;    0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;8,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;       0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;13,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;            0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;21,d&quot;</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;                    0&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can group thousands and space fill with overflow&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;1,d&quot;</span><span class="p">)(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;1&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;1,d&quot;</span><span class="p">)(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;1&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;2,d&quot;</span><span class="p">)(</span><span class="mi">12</span><span class="p">),</span> <span class="s2">&quot;12&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;3,d&quot;</span><span class="p">)(</span><span class="mi">123</span><span class="p">),</span> <span class="s2">&quot;123&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;5,d&quot;</span><span class="p">)(</span><span class="mi">12345</span><span class="p">),</span> <span class="s2">&quot;12,345&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;8,d&quot;</span><span class="p">)(</span><span class="mi">12345678</span><span class="p">),</span> <span class="s2">&quot;12,345,678&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;13,d&quot;</span><span class="p">)(</span><span class="mi">1234567890123</span><span class="p">),</span> <span class="s2">&quot;1,234,567,890,123&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can group thousands with general notation&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;,g&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;42,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">420000000</span><span class="p">),</span> <span class="s2">&quot;420,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;−4&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;−42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4200000</span><span class="p">),</span> <span class="s2">&quot;−4,200,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;−42,000,000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can group thousands, space fill, and round to significant digits&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.1f&quot;</span><span class="p">)(</span><span class="mf">123456.49</span><span class="p">),</span> <span class="s2">&quot; 123,456.5&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.2f&quot;</span><span class="p">)(</span><span class="mf">1234567.449</span><span class="p">),</span> <span class="s2">&quot;1,234,567.45&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.3f&quot;</span><span class="p">)(</span><span class="mf">12345678.4449</span><span class="p">),</span> <span class="s2">&quot;12,345,678.445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.5f&quot;</span><span class="p">)(</span><span class="mf">123456789.444449</span><span class="p">),</span> <span class="s2">&quot;123,456,789.44445&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.1f&quot;</span><span class="p">)(</span><span class="mi">123456</span><span class="p">),</span> <span class="s2">&quot; 123,456.0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.2f&quot;</span><span class="p">)(</span><span class="mi">1234567</span><span class="p">),</span> <span class="s2">&quot;1,234,567.00&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.3f&quot;</span><span class="p">)(</span><span class="mi">12345678</span><span class="p">),</span> <span class="s2">&quot;12,345,678.000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;10,.5f&quot;</span><span class="p">)(</span><span class="mi">123456789</span><span class="p">),</span> <span class="s2">&quot;123,456,789.00000&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;can display integers in fixed-point notation&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)(</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;42&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;will not display non-integers in integer format&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)(</span><span class="mf">4.2</span><span class="p">),</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;supports \&quot;n\&quot; as an alias for \&quot;,g\&quot;&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">0042</span><span class="p">),</span> <span class="s2">&quot;0.0042&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(.</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;0.42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;0&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;42,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="mi">420000000</span><span class="p">),</span> <span class="s2">&quot;420,000,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;−4&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42</span><span class="p">),</span> <span class="s2">&quot;−42&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">4200000</span><span class="p">),</span> <span class="s2">&quot;−4,200,000&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="o">-</span><span class="mi">42000000</span><span class="p">),</span> <span class="s2">&quot;−42,000,000&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">suite</span><span class="p">.</span><span class="kr">export</span><span class="p">(</span><span class="nx">module</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"zmaril/d3",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
